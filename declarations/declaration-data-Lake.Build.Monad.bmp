{"name":"Lake.Build.Monad","instances":[],"imports":["Init","Lake.Config.Monad","Lake.Build.Context","Lake.Util.EStateT"],"declarations":[{"info":{"sourceLink":"https://example.com#L107-L108","name":"Lake.runBuild","line":107,"kind":"def","docLink":"./Lake/Build/Monad.html#Lake.runBuild","doc":"Run the given build function in the Lake monad's workspace. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Monad.html#Lake.runBuild\"><span class=\"name\">Lake</span>.<span class=\"name\">runBuild</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(build : <span class=\"fn\"><a href=\"./Lake/Build/Context.html#Lake.BuildM\">Lake.BuildM</a> <span class=\"fn\">α</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(oldMode : <span class=\"fn\"><a href=\"./Init/Prelude.html#optParam\">optParam</a> <a href=\"./Init/Prelude.html#Bool\">Bool</a> <a href=\"./Init/Prelude.html#Bool.false\">false</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Config/Context.html#Lake.LakeT\">Lake.LakeT</a> <a href=\"./Lake/Util/Log.html#Lake.LogIO\">Lake.LogIO</a> <span class=\"fn\">α</span></span></div></div>"},{"info":{"sourceLink":"https://example.com#L95-L104","name":"Lake.Workspace.runBuild","line":95,"kind":"def","docLink":"./Lake/Build/Monad.html#Lake.Workspace.runBuild","doc":"Run the given build function in the Workspace's context. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Monad.html#Lake.Workspace.runBuild\"><span class=\"name\">Lake</span>.<span class=\"name\">Workspace</span>.<span class=\"name\">runBuild</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(ws : <a href=\"./Lake/Config/Workspace.html#Lake.Workspace\">Lake.Workspace</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(build : <span class=\"fn\"><a href=\"./Lake/Build/Context.html#Lake.BuildM\">Lake.BuildM</a> <span class=\"fn\">α</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(oldMode : <span class=\"fn\"><a href=\"./Init/Prelude.html#optParam\">optParam</a> <a href=\"./Init/Prelude.html#Bool\">Bool</a> <a href=\"./Init/Prelude.html#Bool.false\">false</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Util/Log.html#Lake.LogIO\">Lake.LogIO</a> <span class=\"fn\">α</span></span></div></div>"},{"info":{"sourceLink":"https://example.com#L91-L92","name":"Lake.Workspace.lockFile","line":91,"kind":"def","docLink":"./Lake/Build/Monad.html#Lake.Workspace.lockFile","doc":"The workspace's build lock file. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Monad.html#Lake.Workspace.lockFile\"><span class=\"name\">Lake</span>.<span class=\"name\">Workspace</span>.<span class=\"name\">lockFile</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lake/Config/Workspace.html#Lake.Workspace\">Lake.Workspace</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/System/FilePath.html#System.FilePath\">Lake.FilePath</a></div></div>"},{"info":{"sourceLink":"https://example.com#L87-L88","name":"Lake.lockFileName","line":87,"kind":"def","docLink":"./Lake/Build/Monad.html#Lake.lockFileName","doc":"The name of the Lake build lock file name (i.e., `lake.lock`). "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Monad.html#Lake.lockFileName\"><span class=\"name\">Lake</span>.<span class=\"name\">lockFileName</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#String\">String</a></div></div>"},{"info":{"sourceLink":"https://example.com#L75-L84","name":"Lake.withLockFile","line":75,"kind":"def","docLink":"./Lake/Build/Monad.html#Lake.withLockFile","doc":"Busy wait to acquire the lock of `lockFile`, run `act`, and then release the lock. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Monad.html#Lake.withLockFile\"><span class=\"name\">Lake</span>.<span class=\"name\">withLockFile</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{m : <span class=\"fn\"><a href=\"./foundational_types.html\">Type</a> → <a href=\"./foundational_types.html\">Type</a> u_1</span>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[inst : <span class=\"fn\"><a href=\"./Init/Prelude.html#Monad\">Monad</a> <span class=\"fn\">m</span></span>]</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[inst : <span class=\"fn\"><a href=\"./Init/Control/Except.html#MonadFinally\">MonadFinally</a> <span class=\"fn\">m</span></span>]</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[inst : <span class=\"fn\"><a href=\"./Init/Prelude.html#MonadLiftT\">MonadLiftT</a> <a href=\"./Init/System/IO.html#IO\">IO</a> <span class=\"fn\">m</span></span>]</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(lockFile : <a href=\"./Init/System/FilePath.html#System.FilePath\">Lake.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(act : <span class=\"fn\"><span class=\"fn\">m</span> <span class=\"fn\">α</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><span class=\"fn\">m</span> <span class=\"fn\">α</span></span></div></div>"},{"info":{"sourceLink":"https://example.com#L57-L72","name":"Lake.busyAcquireLockFile.busyLoop","line":57,"kind":"opaque","docLink":"./Lake/Build/Monad.html#Lake.busyAcquireLockFile.busyLoop","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">partial def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Monad.html#Lake.busyAcquireLockFile.busyLoop\"><span class=\"name\">Lake</span>.<span class=\"name\">busyAcquireLockFile</span>.<span class=\"name\">busyLoop</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(lockFile : <a href=\"./Init/System/FilePath.html#System.FilePath\">Lake.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(firstTime : <a href=\"./Init/Prelude.html#Bool\">Bool</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <a href=\"./Init/Prelude.html#PUnit\">PUnit</a></span></div></div>"},{"info":{"sourceLink":"https://example.com#L54-L72","name":"Lake.busyAcquireLockFile","line":54,"kind":"def","docLink":"./Lake/Build/Monad.html#Lake.busyAcquireLockFile","doc":"Busy waits to acquire the lock represented by the `lockFile`.\nPrints a warning if on the first time it has to wait.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Monad.html#Lake.busyAcquireLockFile\"><span class=\"name\">Lake</span>.<span class=\"name\">busyAcquireLockFile</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(lockFile : <a href=\"./Init/System/FilePath.html#System.FilePath\">Lake.FilePath</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <a href=\"./Init/Prelude.html#PUnit\">PUnit</a></span></div></div>"},{"info":{"sourceLink":"https://example.com#L47-L48","name":"Lake.RecBuildM.run","line":47,"kind":"def","docLink":"./Lake/Build/Monad.html#Lake.RecBuildM.run","doc":"Run the recursive build in a fresh build store.\nIf a cycle is encountered, log it and then fail.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Monad.html#Lake.RecBuildM.run\"><span class=\"name\">Lake</span>.<span class=\"name\">RecBuildM</span>.<span class=\"name\">run</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(build : <span class=\"fn\"><a href=\"./Lake/Build/Context.html#Lake.RecBuildM\">Lake.RecBuildM</a> <span class=\"fn\">α</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Context.html#Lake.BuildM\">Lake.BuildM</a> <span class=\"fn\">α</span></span></div></div>"},{"info":{"sourceLink":"https://example.com#L39-L41","name":"Lake.RecBuildM.runIn","line":39,"kind":"def","docLink":"./Lake/Build/Monad.html#Lake.RecBuildM.runIn","doc":"Run the recursive build in the given build store.\nIf a cycle is encountered, log it and then fail.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Monad.html#Lake.RecBuildM.runIn\"><span class=\"name\">Lake</span>.<span class=\"name\">RecBuildM</span>.<span class=\"name\">runIn</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(store : <a href=\"./Lake/Build/Store.html#Lake.BuildStore\">Lake.BuildStore</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(build : <span class=\"fn\"><a href=\"./Lake/Build/Context.html#Lake.RecBuildM\">Lake.RecBuildM</a> <span class=\"fn\">α</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Context.html#Lake.BuildM\">Lake.BuildM</a> (<span class=\"fn\"><span class=\"fn\">α</span> <a href=\"./Init/Prelude.html#Prod\">×</a> <a href=\"./Lake/Build/Store.html#Lake.BuildStore\">Lake.BuildStore</a></span>)</span></div></div>"},{"info":{"sourceLink":"https://example.com#L29-L33","name":"Lake.failOnBuildCycle","line":29,"kind":"def","docLink":"./Lake/Build/Monad.html#Lake.failOnBuildCycle","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Monad.html#Lake.failOnBuildCycle\"><span class=\"name\">Lake</span>.<span class=\"name\">failOnBuildCycle</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{k : <a href=\"./foundational_types.html\">Type</a> u_1}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[inst : <span class=\"fn\"><a href=\"./Init/Data/ToString/Basic.html#ToString\">ToString</a> <span class=\"fn\">k</span></span>]</span></span>\n</span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Except\">Except</a> (<span class=\"fn\"><a href=\"./Init/Prelude.html#List\">List</a> <span class=\"fn\">k</span></span>) <span class=\"fn\">α</span></span> → <span class=\"fn\"><a href=\"./Lake/Build/Context.html#Lake.BuildM\">Lake.BuildM</a> <span class=\"fn\">α</span></span></span></div></div>"},{"info":{"sourceLink":"https://example.com#L26-L27","name":"Lake.getIsOldMode","line":26,"kind":"def","docLink":"./Lake/Build/Monad.html#Lake.getIsOldMode","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Monad.html#Lake.getIsOldMode\"><span class=\"name\">Lake</span>.<span class=\"name\">getIsOldMode</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Context.html#Lake.BuildM\">Lake.BuildM</a> <a href=\"./Init/Prelude.html#Bool\">Bool</a></span></div></div>"},{"info":{"sourceLink":"https://example.com#L23-L24","name":"Lake.getLeanTrace","line":23,"kind":"def","docLink":"./Lake/Build/Monad.html#Lake.getLeanTrace","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Monad.html#Lake.getLeanTrace\"><span class=\"name\">Lake</span>.<span class=\"name\">getLeanTrace</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Context.html#Lake.BuildM\">Lake.BuildM</a> <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace\">Lake.BuildTrace</a></span></div></div>"},{"info":{"sourceLink":"https://example.com#L14-L21","name":"Lake.mkBuildContext","line":14,"kind":"def","docLink":"./Lake/Build/Monad.html#Lake.mkBuildContext","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Monad.html#Lake.mkBuildContext\"><span class=\"name\">Lake</span>.<span class=\"name\">mkBuildContext</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(ws : <a href=\"./Lake/Config/Workspace.html#Lake.Workspace\">Lake.Workspace</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(oldMode : <a href=\"./Init/Prelude.html#Bool\">Bool</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <a href=\"./Lake/Build/Context.html#Lake.BuildContext\">Lake.BuildContext</a></span></div></div>"}]}